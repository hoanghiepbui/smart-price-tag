{% extends "base.html" %}

{% block title %}{{ form_title }}{% endblock %}

{% block content %}
<h1 class="h3 mb-3">{{ form_title }}</h1>

<form method="post" class="bg-white p-3 rounded border">
  <div class="mb-3">
    <label for="sku" class="form-label">SKU / Mã hàng</label>
    <input type="text" class="form-control" id="sku" name="sku" value="{{ product.sku or '' }}" required>
  </div>

  <div class="mb-3">
    <label for="name" class="form-label">Tên sản phẩm</label>
    <input type="text" class="form-control" id="name" name="name" value="{{ product.name or '' }}" required>
  </div>

  <div class="mb-3">
    <label for="price" class="form-label">Giá</label>
    <input type="number" step="0.01" class="form-control" id="price" name="price"
           value="{{ product.price or '' }}" required>
  </div>

  <div class="mb-3">
    <label for="currency" class="form-label">Tiền tệ</label>
    <input type="text" class="form-control" id="currency" name="currency"
           value="{{ product.currency or 'VND' }}" maxlength="3">
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Mô tả</label>
    <textarea class="form-control" id="description" name="description" rows="3">{{ product.description or '' }}</textarea>
  </div>

  <div class="mb-3">
    <label for="image_url" class="form-label">Ảnh (URL)</label>
    <input type="url" class="form-control" id="image_url" name="image_url" value="{{ product.image_url or '' }}">
  </div>

  <div class="mb-3">
    <label for="status" class="form-label">Trạng thái</label>
    <select class="form-select" id="status" name="status_value">
      {% set st = product.status or 'active' %}
      <option value="active"   {{ 'selected' if st == 'active' else '' }}>Đang dùng</option>
      <option value="inactive" {{ 'selected' if st == 'inactive' else '' }}>Tạm tắt</option>
      <option value="deleted"  {{ 'selected' if st == 'deleted' else '' }}>Ẩn / xoá mềm</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary">Lưu</button>
  <a href="/admin/products" class="btn btn-secondary">Huỷ</a>
  {% if is_edit %}
    <button formaction="/admin/products/{{ product.id }}/delete"
            formmethod="post"
            class="btn btn-danger ms-2"
            onclick="return confirm('Xoá sản phẩm này?');">
      Xoá
    </button>
  {% endif %}
</form>
{% endblock %}
